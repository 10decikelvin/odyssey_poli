<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Autonomous Robot Navigation Firmware: Vehicle</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Autonomous Robot Navigation Firmware<span id="projectnumber">&#160;1.0.0</span>
   </div>
   <div id="projectbrief">Firmware for an autonomous robot navigation system. Developed by Odyssey for the 2024 QUT Droid Racing Challenge.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="doc-content">
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">Vehicle</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gae6c4fabc1cec8cd44fcc846cf0236be2" id="r_gae6c4fabc1cec8cd44fcc846cf0236be2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gae6c4fabc1cec8cd44fcc846cf0236be2">drive</a> (int data[])</td></tr>
<tr class="memdesc:gae6c4fabc1cec8cd44fcc846cf0236be2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Controls the driving mechanism of a robot based on input commands.This function interprets an array of integers to control the driving mechanism of a robot, adjusting the speed and direction of its motors. The input array contains values for left and right motor PWM (Pulse Width Modulation) signals and a mode selector. The function supports three modes: normal operation, off, and brake. In normal operation, the PWM values directly control the motor speeds, allowing for forward and reverse motion. The off mode stops all motor activity, and the brake mode actively halts the motors, which can cause voltage spikes and should be used cautiously.  <br /></td></tr>
<tr class="separator:gae6c4fabc1cec8cd44fcc846cf0236be2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga8d5b205f2e28fb66216cf87138631f8f" id="r_ga8d5b205f2e28fb66216cf87138631f8f"><td class="memItemLeft" align="right" valign="top">const float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga8d5b205f2e28fb66216cf87138631f8f">WHEEL_RATIO</a> = 555</td></tr>
<tr class="memdesc:ga8d5b205f2e28fb66216cf87138631f8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">encoder ticks per metre (~0.00188496m/t)  <br /></td></tr>
<tr class="separator:ga8d5b205f2e28fb66216cf87138631f8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gada93907bffc882942b0f22747b5933d0" id="r_gada93907bffc882942b0f22747b5933d0"><td class="memItemLeft" align="right" valign="top">const float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gada93907bffc882942b0f22747b5933d0">WHEELBASE</a> = 0.36</td></tr>
<tr class="memdesc:gada93907bffc882942b0f22747b5933d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">distance between the two wheels in metres  <br /></td></tr>
<tr class="separator:gada93907bffc882942b0f22747b5933d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac0fe1b863c35522a47ec379972fd6efc" id="r_gac0fe1b863c35522a47ec379972fd6efc"><td class="memItemLeft" align="right" valign="top">const float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gac0fe1b863c35522a47ec379972fd6efc">HALF_VEHICLE_WIDTH</a> = <a class="el" href="#gada93907bffc882942b0f22747b5933d0">WHEELBASE</a> / 2</td></tr>
<tr class="memdesc:gac0fe1b863c35522a47ec379972fd6efc"><td class="mdescLeft">&#160;</td><td class="mdescRight">half the wheelbase, in metres  <br /></td></tr>
<tr class="separator:gac0fe1b863c35522a47ec379972fd6efc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5904146976da789cdfcbca51d567906d" id="r_ga5904146976da789cdfcbca51d567906d"><td class="memItemLeft" align="right" valign="top">const float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga5904146976da789cdfcbca51d567906d">MAX_SPEED</a> = 1300 / <a class="el" href="#ga8d5b205f2e28fb66216cf87138631f8f">WHEEL_RATIO</a></td></tr>
<tr class="memdesc:ga5904146976da789cdfcbca51d567906d"><td class="mdescLeft">&#160;</td><td class="mdescRight">max speed in ticks per second  <br /></td></tr>
<tr class="separator:ga5904146976da789cdfcbca51d567906d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf1f5ecc4bcc249991e33470d6864db5a" id="r_gaf1f5ecc4bcc249991e33470d6864db5a"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaf1f5ecc4bcc249991e33470d6864db5a">MAX_PWM</a> = 250</td></tr>
<tr class="memdesc:gaf1f5ecc4bcc249991e33470d6864db5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">max PWM value for the motors  <br /></td></tr>
<tr class="separator:gaf1f5ecc4bcc249991e33470d6864db5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa7dc52880b41eb022f995991d2815519" id="r_gaa7dc52880b41eb022f995991d2815519"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaa7dc52880b41eb022f995991d2815519">MIN_SPEED</a> = 4</td></tr>
<tr class="memdesc:gaa7dc52880b41eb022f995991d2815519"><td class="mdescLeft">&#160;</td><td class="mdescRight">minimum speed to move the robot in ticks per second (4 t/s ~= 8mm/s)  <br /></td></tr>
<tr class="separator:gaa7dc52880b41eb022f995991d2815519"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="gae6c4fabc1cec8cd44fcc846cf0236be2" name="gae6c4fabc1cec8cd44fcc846cf0236be2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae6c4fabc1cec8cd44fcc846cf0236be2">&#9670;&#160;</a></span>drive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void drive </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>data</em></span>[]</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Controls the driving mechanism of a robot based on input commands.This function interprets an array of integers to control the driving mechanism of a robot, adjusting the speed and direction of its motors. The input array contains values for left and right motor PWM (Pulse Width Modulation) signals and a mode selector. The function supports three modes: normal operation, off, and brake. In normal operation, the PWM values directly control the motor speeds, allowing for forward and reverse motion. The off mode stops all motor activity, and the brake mode actively halts the motors, which can cause voltage spikes and should be used cautiously. </p>
<dl class="section warning"><dt>Warning</dt><dd>The brake mode can cause voltage spikes and should be used with caution to avoid damaging the motors or other components.</dd></dl>
<p>The function uses <code>digitalWriteFast</code> to set the direction of the motors and <code>analogWrite</code> to control the speed. It ensures that the motors are stopped if both PWM values are zero, regardless of the selected mode. This function is designed for robots with differential drive systems, where the speed and direction of each side (left and right) can be controlled independently.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>An array of integers where:<ul>
<li>data[0] is the PWM value for the left motor (positive for forward, negative for reverse | range: -255 to 255),</li>
<li>data[1] is the PWM value for the right motor (positive for forward, negative for reverse | range: -255 to 255),</li>
<li>data[2] is the mode selector (0 for normal operation, 1 for off, 2 for brake). </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="gac0fe1b863c35522a47ec379972fd6efc" name="gac0fe1b863c35522a47ec379972fd6efc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac0fe1b863c35522a47ec379972fd6efc">&#9670;&#160;</a></span>HALF_VEHICLE_WIDTH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const float HALF_VEHICLE_WIDTH = <a class="el" href="#gada93907bffc882942b0f22747b5933d0">WHEELBASE</a> / 2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>half the wheelbase, in metres </p>

</div>
</div>
<a id="gaf1f5ecc4bcc249991e33470d6864db5a" name="gaf1f5ecc4bcc249991e33470d6864db5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf1f5ecc4bcc249991e33470d6864db5a">&#9670;&#160;</a></span>MAX_PWM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int MAX_PWM = 250</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>max PWM value for the motors </p>

</div>
</div>
<a id="ga5904146976da789cdfcbca51d567906d" name="ga5904146976da789cdfcbca51d567906d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5904146976da789cdfcbca51d567906d">&#9670;&#160;</a></span>MAX_SPEED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const float MAX_SPEED = 1300 / <a class="el" href="#ga8d5b205f2e28fb66216cf87138631f8f">WHEEL_RATIO</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>max speed in ticks per second </p>

</div>
</div>
<a id="gaa7dc52880b41eb022f995991d2815519" name="gaa7dc52880b41eb022f995991d2815519"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa7dc52880b41eb022f995991d2815519">&#9670;&#160;</a></span>MIN_SPEED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int MIN_SPEED = 4</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>minimum speed to move the robot in ticks per second (4 t/s ~= 8mm/s) </p>

</div>
</div>
<a id="ga8d5b205f2e28fb66216cf87138631f8f" name="ga8d5b205f2e28fb66216cf87138631f8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8d5b205f2e28fb66216cf87138631f8f">&#9670;&#160;</a></span>WHEEL_RATIO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const float WHEEL_RATIO = 555</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>encoder ticks per metre (~0.00188496m/t) </p>

</div>
</div>
<a id="gada93907bffc882942b0f22747b5933d0" name="gada93907bffc882942b0f22747b5933d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gada93907bffc882942b0f22747b5933d0">&#9670;&#160;</a></span>WHEELBASE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const float WHEELBASE = 0.36</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>distance between the two wheels in metres </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
